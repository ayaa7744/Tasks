create database company2


CREATE TABLE EMPLOYEE (
    SSN CHAR(9) PRIMARY KEY,
    Fname VARCHAR(20) NOT NULL,
    Lname VARCHAR(20) NOT NULL,
    BirthDate DATE NOT NULL,
    Gender CHAR(1) CHECK (Gender IN ('M', 'F')),
    SupervisorSSN CHAR(9) NULL,
    DNO INT NOT NULL
);

CREATE TABLE DEPARTMENT (
  DNUM INT PRIMARY KEY,
  DName VARCHAR(30) NOT NULL UNIQUE,
  ESSN CHAR(9) NOT NULL,
  Hiringdate DATE NOT NULL,

);

CREATE TABLE PROJECT (
  PNumber INT PRIMARY KEY,
  Pname VARCHAR(30) NOT NULL,
  Location VARCHAR(50) NOT NULL,
  DNUM INT NOT NULL,
 
);


CREATE TABLE WORKS_ON (
    ESSN CHAR(9),
    PNum INT,
    Hours DECIMAL(5,2),
    PRIMARY KEY (ESSN, PNum)
);



CREATE TABLE DEPENDENT (
    ESSN CHAR(9),
    DependentName VARCHAR(30),
    Gender CHAR(1) CHECK (Gender IN ('M', 'F')),
    BirthDate DATE,
    PRIMARY KEY (ESSN, DependentName)
);



-- ADD Relation to each table


ALTER TABLE EMPLOYEE
ADD FOREIGN KEY (SupervisorSSN) REFERENCES EMPLOYEE(SSN),
    FOREIGN KEY (DNo) REFERENCES DEPARTMENT(DNUM);

ALTER TABLE DEPARTMENT
ADD FOREIGN KEY (ESSN) REFERENCES EMPLOYEE(SSN);

ALTER TABLE PROJECT
ADD FOREIGN KEY (DNUM) REFERENCES DEPARTMENT(DNUM);


ALTER TABLE WORKS_ON
ADD FOREIGN KEY (ESSN) REFERENCES EMPLOYEE(SSN),
    FOREIGN KEY (PNum) REFERENCES PROJECT(PNumber);

ALTER TABLE DEPENDENT
ADD FOREIGN KEY (ESSN) REFERENCES EMPLOYEE(SSN) ON DELETE CASCADE;


INSERT INTO EMPLOYEE VALUES
('123456789', 'Aya', 'Mohamed', '1995-04-10', 'F', NULL, 1),
('987654321', 'Ali', 'Hassan', '1990-12-22', 'M', '123456789', 2),
('111222333', 'Sara', 'Omar', '1988-09-15', 'F', '987654321', 3),
('444555666', 'Mostafa', 'Ahmed', '1997-01-20', 'M', '123456789', 2),
('777888999', 'Nada', 'Youssef', '1999-11-30', 'F', '111222333', 1);
select * from EMPLOYEE


INSERT INTO DEPARTMENT VALUES
(1, 'HR', '123456789', '2020-01-10'),
(2, 'IT', '987654321', '2019-06-01'),
(3, 'Finance', '111222333', '2021-03-15');
select * from DEPARTMENT


INSERT INTO PROJECT VALUES
(101, 'Payroll System', 'Cairo', 1),
(102, 'E-Commerce Website', 'Alexandria', 2),
(103, 'Banking App', 'Tanta', 3);
select * from PROJECT


INSERT INTO WORKS_ON VALUES
('123456789', 101, 10),
('987654321', 102, 20),
('444555666', 102, 15),
('111222333', 103, 25),
('777888999', 101, 12);
select * from WORKS_ON


INSERT INTO DEPENDENT VALUES
('123456789', 'Omar', 'M', '2015-05-15'),
('987654321', 'Layla', 'F', '2018-08-01');
select * from DEPENDENT